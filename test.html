<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>lsys</title>
    <link href="css/topcoat/css/normalize.css" rel="stylesheet" type="text/css"/>
    <link href="sass/test.css" rel="stylesheet" type="text/css"/>
</head>
<body class="bg-slategray">

<script type="template" id="control-row">
    #{value}
</script>

<div class="left">

    <div class="header">
        <a href="http://benvan.co.uk/lsys"><img src="img/logo_tr.png"><span>lsys</span></a>

    </div>
    <div class="controls">
        <ul>
            <li class="label">sensitivity</li>

            <li>
                <ul class="control-row single">
                    <li>x</li><!--
             --><li><input id="xSensitivity" type="text" ></li>
                </ul>
                <ul class="control-row single">
                    <li>y</li><!--
             --><li><input id="ySensitivity" type="text" ></li>
                </ul>
            </li>

            <li class="label">variables</li>

            <li id="control-container">
                <!-- controls be here! -->
            </li>

            <li class="label">system</li>

            <li>
                <ul class="control-row single half">
                    <li>levels</li><!--
             --><li><input id="iterations" type="text" ></li>
                </ul>
                <ul class="control-row">
                    <li>rules</li><!--
             --><li>
                    <textarea id="rules" rows="12"></textarea>
                </li>
                </ul>
            </li>
        </ul>
    </div>

</div>
<div class="bottom bg-slategray">
    <footer class="ticker">
        <div class="ticker-bar"></div>
        <ul class="elems">
        </ul>
    </footer>
</div>
<div class="right">

    <div class="drawing-pad">
        <div id="systemInfo" class="system-info blue">
            <div id="systemName" class="system-name">click-and-drag!</div>
            <a class="system-author" data-toggle="modal" href="#myModal">benvan</a>
        </div>
        <div class="actions">
            <a class="export" style="color:#ddd; font-size:8pt;"  href="#"><i class="icon icon-white icon-download-alt"></i> png</a>
        </div>
        <div id="drawingContainer">
            <canvas id="c"></canvas>
        </div>
    </div>

</div>

<script type="text/javascript" src="js/underscore.js"></script>
<script type="text/javascript" src="js/jquery-1.8.1.js"></script>

<script type="text/javascript" src="js/system-ticker.js"></script>

<script type="text/javascript" src="js/generated/util.js"></script>
<script type="text/javascript" src="js/generated/controls.js"></script>
<script type="text/javascript" src="js/generated/classes.js"></script>
<script type="text/javascript" src="js/generated/lsystem.js"></script>
<script type="text/javascript" src="js/generated/rendering.js"></script>
<script type="text/javascript" src="js/generated/manager.js"></script>
<script type="text/javascript">
    var manager; // Don't judge. I want to get ahold of it in the console!
    $(document).ready(function () {

        $(".elems").ticker("ticker.json");

        manager = new SystemManager(
                Util.control("c"),
                {
                    container: Util.control('control-container'),
                    iterations: Util.control('iterations'),
                    rules: Util.control('rules')
                }
        );

        manager.run();

        var stretchCanvas = function(){
            var canvas = Util.control("c");
            window.container = Util.control("drawingContainer");
            canvas.width = container.clientWidth;
            canvas.height = container.clientHeight;
        };

        stretchCanvas();
        $(window).resize(function(){
            clearTimeout(window.resizeTimer);
            window.resizeTimer = setTimeout(function(){
                stretchCanvas();
                manager.draw()
            },300);
        });

        manager.draw();
    });


</script>


</body>
</html>
